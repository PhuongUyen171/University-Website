CREATE DATABASE QL_TRUONGHOC

USE QL_TRUONGHOC
GO

DROP DATABASE QL_TRUONGHOC


------TẠO BẢNG-----
CREATE TABLE KHOA
(
	MaKhoa CHAR(4) PRIMARY KEY,
	TenKhoa NVARCHAR(100),
	NamThanhLap INT
)

CREATE TABLE KHOAHOC
(
	MaKhoaHoc CHAR(4) PRIMARY KEY,
	NamBatDau INT,
	NamKetThuc INT
)

CREATE TABLE CHUONGTRINH
(
	MaCT CHAR(2) PRIMARY KEY,
	TenCT NVARCHAR(MAX)
)

CREATE TABLE LOP
(
	MaLop CHAR(7) PRIMARY KEY,
	TenLop NVARCHAR(100),
	MaKhoa CHAR(4) FOREIGN KEY(MaKhoa) REFERENCES KHOA(MaKhoa),
	MaKhoaHoc CHAR(4) FOREIGN KEY (MaKhoaHoc) REFERENCES KHOAHOC(MaKhoaHoc),
	MaCT CHAR(2) FOREIGN KEY (MaCT) REFERENCES CHUONGTRINH(MaCT)
)

CREATE TABLE MONHOC
(
	MaMH CHAR(4) PRIMARY KEY,
	TenMH NVARCHAR(100)
)

CREATE TABLE SINHVIEN
(
	MaSV CHAR(4) PRIMARY KEY,
	TenSV NVARCHAR(100),
	SDT CHAR(10),
	DiaChi NVARCHAR(MAX),
	Email VARCHAR(MAX),
	Hinh NVARCHAR(MAX),
	NamSinh INT,
	MatKhau CHAR(10),
	MaLop CHAR(7) FOREIGN KEY (MaLop) REFERENCES LOP(MaLop)
)

CREATE TABLE GIAOVIEN
(
	MaGV CHAR(4) PRIMARY KEY,
	TenGV NVARCHAR(MAX),
	MatKhau CHAR(10),
	ChuyenNganh CHAR(4) FOREIGN KEY (ChuyenNganh) REFERENCES KHOA(MaKhoa),
	HocVi NVARCHAR(20)
)

CREATE TABLE KETQUA
(
	MaSV CHAR(4),
	MaMH CHAR(4),
	LanThi INT,
	Diem FLOAT,
	PRIMARY KEY(MaSV,MaMH,LanThi),
	FOREIGN KEY (MaMH) REFERENCES MONHOC(MaMH),
	FOREIGN KEY (MaSV) REFERENCES SINHVIEN(MaSV)
)

CREATE TABLE GIANGKHOA
(
	MaCT CHAR(2) FOREIGN KEY (MaCT) REFERENCES CHUONGTRINH(MaCT),
	MaKhoa CHAR(4) FOREIGN KEY (MaKhoa) REFERENCES KHOA(MaKhoa),
	MaMH CHAR(4) FOREIGN KEY (MaMH) REFERENCES MONHOC(MaMH),
	NamHoc INT,
	HocKy INT,
	SoTietLyThuyet INT,
	SoTietThucHanh INT,
	SoTC INT,
	PRIMARY KEY(MaCT,MaKhoa,MaMH)
)

CREATE TABLE TINTUC
(
	MaTin CHAR(4) PRIMARY KEY,
	TieuDe NVARCHAR(MAX),
	NoiDung NVARCHAR(MAX),
	Hinh NVARCHAR(MAX),
	Ngay DATE
)

------NHẬP LIỆU------
INSERT INTO KHOA VALUES('CNTT',N'Công nghệ thông tin',1975)
INSERT INTO KHOA VALUES('CNTP',N'Công nghệ thực phẩm',1998)
INSERT INTO KHOA VALUES('CNHH',N'Công nghệ hóa học',1965)

INSERT INTO KHOAHOC VALUES('08',2017,2021)
INSERT INTO KHOAHOC VALUES('07',2016,2020)
INSERT INTO KHOAHOC VALUES('09',2018,2022)
INSERT INTO KHOAHOC VALUES('06',2015,2019)

INSERT INTO CHUONGTRINH VALUES('DH',N'Đại học')
INSERT INTO CHUONGTRINH VALUES('CD',N'Cao đẳng')
INSERT INTO CHUONGTRINH VALUES('TS',N'Thạc sĩ')

INSERT INTO MONHOC VALUES('MH01',N'Nhập môn lập trình')
INSERT INTO MONHOC VALUES('MH02',N'Lập trình android')
INSERT INTO MONHOC VALUES('MH03',N'Giáo dục thể chất')
INSERT INTO MONHOC VALUES('MH04',N'Giáo dục quốc phòng')
INSERT INTO MONHOC VALUES('MH05',N'Anh văn A1')
INSERT INTO MONHOC VALUES('MH06',N'Hóa học đại cương')

INSERT INTO GIAOVIEN VALUES('GV01',N'Nguyễn Xuân Nhật','123','CNHH',N'Cử nhân')
INSERT INTO GIAOVIEN VALUES('GV02',N'Nguyễn Xuân Thái','123','CNTP',N'Cử nhân')
INSERT INTO GIAOVIEN VALUES('GV03',N'Nguyễn Thị Nhật','123','CNTT',N'Thạc sĩ')
INSERT INTO GIAOVIEN VALUES('GV04',N'Bùi Công Danh','123','CNTT',N'Cử nhân')

INSERT INTO LOP VALUES('08DHTH1',N'08 đại học tin học 1','CNTT','08','DH')
INSERT INTO LOP VALUES('08DHTH2',N'08 đại học tin học 2','CNTT','08','DH')
INSERT INTO LOP VALUES('08DHTH3',N'08 đại học tin học 3','CNTT','08','DH')
INSERT INTO LOP VALUES('07DHTP1',N'07 đại học thực phẩm 1','CNTP','07','DH')
INSERT INTO LOP VALUES('07DHTP2',N'07 đại học thực phẩm 2','CNTP','07','DH')
INSERT INTO LOP VALUES('06DHHH1',N'06 đại học hóa học 1','CNHH','06','DH')
INSERT INTO LOP VALUES('06DHHH2',N'08 đại học hóa học 2','CNHH','06','DH')

INSERT INTO SINHVIEN VALUES('SV01',N'Nguyễn Văn Thịnh','1323456789',N'130 Lê Trọng Tấn','thinh@gmail.com','hinh1.jpg',1999,'123','07DHTP1')
INSERT INTO SINHVIEN VALUES('SV02',N'Nguyễn Ngọc Thu','1323456987',N'131 Lê Trọng Tấn','thu@gmail.com','hinh2.jpg',1999,'123','07DHTP1')

INSERT INTO GIANGKHOA VALUES('DH','CNTT','MH01',2017,1,3,6,3)
INSERT INTO GIANGKHOA VALUES('DH','CNTT','MH02',2017,2,2,4,2)
INSERT INTO GIANGKHOA VALUES('DH','CNTT','MH03',2018,2,3,6,3)

SET DATEFORMAT DMY
INSERT INTO TINTUC VALUES('TT01',N'Thông báo Về việc tiếp tục tạm dừng tập trung học tại các cơ sở của Trường đến hết ngày 01/03/2020',N'Toàn thể người học tại TDTU tiếp tục tạm dừng tập trung học tại các cơ sở của Trường từ ngày 24/02/2020 cho đến hết ngày 01/03/2020.','hinh1.jpg','17/10/2020')
------LỆNH--------
SELECT * FROM KHOA
SELECT * FROM KHOAHOC
SELECT * FROM CHUONGTRINH
SELECT * FROM MONHOC
SELECT * FROM GIAOVIEN
SELECT * FROM LOP
SELECT * FROM SINHVIEN
SELECT * FROM KETQUA
SELECT * FROM GIANGKHOA


